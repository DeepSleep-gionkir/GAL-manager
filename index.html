<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°¤ëŸ¬ë¦¬ ì‚´ë¦¬ê¸° ì‹œë®¬ë ˆì´í„°</title>
    <style>
        :root {
            --bg-color: #2d3436;
            --text-color: #dfe6e9;
            --accent-color: #0984e3;
            --danger-color: #d63031;
            --warning-color: #fdcb6e;
            --success-color: #00b894;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            box-sizing: border-box;
            overflow: hidden;
        }

        h1 {
            margin-top: 0;
            text-shadow: 2px 2px 0px #000;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #636e72;
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        /* Stats Bars */
        .status-bar {
            margin-bottom: 15px;
        }
        .status-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .bar-container {
            height: 20px;
            background-color: #636e72;
            border-radius: 10px;
            overflow: hidden;
        }
        .bar-fill {
            height: 100%;
            width: 50%;
            transition: width 0.3s ease, background-color 0.3s ease;
        }

        /* Log Area */
        #game-log {
            flex: 1;
            background-color: #000;
            color: #0f0;
            font-family: 'Courier New', monospace;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            overflow-y: auto;
            font-size: 14px;
            border: 1px solid #444;
            min-height: 150px;
        }
        .log-entry { margin-bottom: 5px; border-bottom: 1px dashed #333; padding-bottom: 2px; }
        .log-day { color: #ffeaa7; font-weight: bold; }
        .log-bad { color: var(--danger-color); }
        .log-good { color: var(--success-color); }

        /* Action Grid */
        .actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        button {
            padding: 15px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
            color: white;
            position: relative;
            overflow: hidden;
        }

        button:active { transform: scale(0.98); }
        button:disabled { opacity: 0.5; cursor: not-allowed; filter: grayscale(100%); }

        .btn-normal { background-color: var(--accent-color); }
        .btn-danger { background-color: var(--danger-color); }
        .btn-warning { background-color: #e17055; }
        .btn-special { background-color: #6c5ce7; }

        /* Game Over Overlay */
        #overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 100;
            text-align: center;
        }
        #ending-title { font-size: 2rem; color: var(--danger-color); margin-bottom: 20px; }
        #ending-desc { font-size: 1.2rem; margin-bottom: 30px; max-width: 80%; line-height: 1.5; }
        #restart-btn {
            background-color: var(--success-color);
            padding: 15px 40px;
            font-size: 1.5rem;
        }

        .tooltip {
            font-size: 0.8rem;
            color: #b2bec3;
            display: block;
            margin-top: 5px;
            font-weight: normal;
        }

    </style>
</head>
<body>

    <h1>ğŸ“‰ ê°¤ëŸ¬ë¦¬ ì‚´ë¦¬ê¸° ì‹œë®¬ë ˆì´í„°</h1>

    <div class="container">
        <div class="status-bar">
            <div class="status-label">
                <span>ğŸ“… ìƒì¡´ì¼: <span id="day-display">1</span>ì¼ì°¨</span>
                <span>ğŸ”¥ ê°¤ëŸ¬ë¦¬ í™œì„±ë„ (ë¦¬ì  )</span>
            </div>
            <div class="bar-container">
                <div id="activity-bar" class="bar-fill" style="width: 50%; background-color: #00b894;"></div>
            </div>
        </div>

        <div class="status-bar">
            <div class="status-label">
                <span>ğŸ¤¬ ì–´ê·¸ë¡œ/ë¶„íƒ• ë†ë„</span>
                <span>ğŸ’€ ë§ê°¤ ìœ„í—˜ë„</span>
            </div>
            <div class="bar-container">
                <div id="toxicity-bar" class="bar-fill" style="width: 20%; background-color: #fdcb6e;"></div>
            </div>
        </div>

        <div class="status-bar">
            <div class="status-label">
                <span>ğŸ¤ ì¹œëª©ì§ˆ(ì¢†ëª©) ìˆ˜ì¹˜</span>
            </div>
            <div class="bar-container">
                <div id="friendship-bar" class="bar-fill" style="width: 10%; background-color: #74b9ff;"></div>
            </div>
        </div>

        <div id="game-log">
            <div class="log-entry">> ë§ˆì´ë„ˆ ê°¤ëŸ¬ë¦¬ê°€ ê°œì„¤ë˜ì—ˆìŠµë‹ˆë‹¤. ì£¼ë”±ì´ ë˜ì‹  ê±¸ í™˜ì˜í•©ë‹ˆë‹¤.</div>
            <div class="log-entry">> ëª©í‘œ: ê°¤ëŸ¬ë¦¬ë¥¼ í­íŒŒì‹œí‚¤ì§€ ì•Šê³  30ì¼ê°„ ìƒì¡´í•˜ì„¸ìš”.</div>
        </div>

        <div class="actions">
            <button class="btn-normal" onclick="action('promote')">
                í™ë³´í•˜ê¸° (ì…ê°¤ ìœ ë„)
                <span class="tooltip">í™œì„±ë„â†‘ ì–´ê·¸ë¡œâ†‘</span>
            </button>
            <button class="btn-danger" onclick="action('ban')">
                30ì¼ ì°¨ë‹¨ ë‚œì‚¬ (ì™„ì¥ì§ˆ)
                <span class="tooltip">ì–´ê·¸ë¡œâ†“â†“ í™œì„±ë„â†“â†“</span>
            </button>
            <button class="btn-warning" onclick="action('bait')">
                ì–´ê·¸ë¡œ ëŒê¸° (ë¶„íƒ•)
                <span class="tooltip">í™œì„±ë„â†‘â†‘ ì–´ê·¸ë¡œâ†‘â†‘ ì¹œëª©â†“</span>
            </button>
            <button class="btn-special" onclick="action('info')">
                ì–‘ì§ˆì˜ ì •ë³´ê¸€ ì‘ì„±
                <span class="tooltip">í™œì„±ë„ì•½ê°„â†‘ ì–´ê·¸ë¡œì•½ê°„â†“</span>
            </button>
            <button class="btn-danger" onclick="action('close_friend')">
                ë‹‰ì–¸ê¸‰/ì¹œëª© í—ˆìš©
                <span class="tooltip">í™œì„±ë„â†‘ ì¹œëª©â†‘â†‘â†‘</span>
            </button>
            <button class="btn-normal" onclick="action('ignore')">
                ë°©ì¹˜í•˜ê¸° (ì§ë¬´ìœ ê¸°)
                <span class="tooltip">ë³€í™”í­ ëœë¤ (ìœ„í—˜)</span>
            </button>
        </div>
    </div>

    <div id="overlay">
        <h2 id="ending-title">GAME OVER</h2>
        <p id="ending-desc">ê°¤ëŸ¬ë¦¬ê°€ ë§í–ˆìŠµë‹ˆë‹¤.</p>
        <button id="restart-btn" onclick="resetGame()">ìƒˆ ì§€êµ¬ íŒŒê¸° (ì¬ì‹œì‘)</button>
    </div>

<script>
    // Game State
    let state = {
        day: 1,
        activity: 50,    // 0: ì •ì „ê°¤, 100: ì‹¤ë¶ê°¤(í†µì œë¶ˆëŠ¥)
        toxicity: 20,    // 0: í´ë¦°í•¨(ë…¸ì¼), 100: ê°¤ê¸°ì¥(ì‹¸ì›€íŒ)
        friendship: 10,  // 0: ì‚­ë§‰í•¨, 100: ì¢†ëª©ê°¤(ë§í•¨)
        isGameOver: false
    };

    const maxDays = 30;

    // UI Elements
    const logEl = document.getElementById('game-log');
    const dayEl = document.getElementById('day-display');
    const activityBar = document.getElementById('activity-bar');
    const toxicityBar = document.getElementById('toxicity-bar');
    const friendshipBar = document.getElementById('friendship-bar');
    const overlay = document.getElementById('overlay');
    const endingTitle = document.getElementById('ending-title');
    const endingDesc = document.getElementById('ending-desc');

    function updateUI() {
        dayEl.innerText = state.day;

        // Update Bars
        setBar(activityBar, state.activity);
        setBar(toxicityBar, state.toxicity);
        setBar(friendshipBar, state.friendship);

        logEl.scrollTop = logEl.scrollHeight;
    }

    function setBar(element, value) {
        element.style.width = value + '%';
        if (value < 30) element.style.backgroundColor = '#00b894'; // Green
        else if (value < 70) element.style.backgroundColor = '#fdcb6e'; // Yellow
        else element.style.backgroundColor = '#d63031'; // Red
    }

    function addLog(msg, type = 'normal') {
        const div = document.createElement('div');
        div.className = 'log-entry';
        let prefix = `<span class="log-day">[Day ${state.day}]</span> `;
        
        if (type === 'bad') div.classList.add('log-bad');
        if (type === 'good') div.classList.add('log-good');
        
        div.innerHTML = prefix + msg;
        logEl.appendChild(div);
    }

    // Core Game Logic
    function action(type) {
        if (state.isGameOver) return;

        let logMsg = "";
        let actChange = 0;
        let toxChange = 0;
        let friChange = 0;

        // Base Logic for Choices
        switch(type) {
            case 'promote':
                actChange = r(15, 25);
                toxChange = r(5, 15);
                friChange = r(-5, 0);
                logMsg = "íƒ€ ê°¤ëŸ¬ë¦¬ì— í™ë³´ë¥¼ ë‹¤ë…”ìŠµë‹ˆë‹¤. ìœ ì…ì´ ëŠ˜ì—ˆì§€ë§Œ ë¶„íƒ•ë„ ì„ì—¬ ë“¤ì–´ì˜µë‹ˆë‹¤.";
                break;
            case 'ban':
                actChange = r(-20, -10);
                toxChange = r(-25, -15);
                friChange = r(0, 5); // ì™„ì¥ ì°¬ì–‘í•˜ëŠ” ë¬´ë¦¬ ìƒê¹€
                logMsg = "30ì¼ ì°¨ë‹¨ì„ ë‚œì‚¬í–ˆìŠµë‹ˆë‹¤. ê°¤ëŸ¬ë¦¬ê°€ ì¡°ìš©í•´ì¡Œì§€ë§Œ ê¸€ì  ë„ ì£½ì—ˆìŠµë‹ˆë‹¤.";
                break;
            case 'bait':
                actChange = r(20, 30);
                toxChange = r(20, 30);
                friChange = r(-10, -5);
                logMsg = "ìê·¹ì ì¸ ë–¡ë°¥ì„ êµ´ë ¸ìŠµë‹ˆë‹¤. ê°¤ëŸ¬ë¦¬ê°€ ë¶ˆíƒ€ì˜¤ë¦…ë‹ˆë‹¤!";
                break;
            case 'info':
                actChange = r(5, 10);
                toxChange = r(-10, -5);
                friChange = r(0, 2);
                logMsg = "ì¥ë¬¸ì˜ ì •ë³´ê¸€ì„ ì¼ìŠµë‹ˆë‹¤. ìœ ìš©í•˜ì§€ë§Œ ë°˜ì‘ì´ ë¯¸ì ì§€ê·¼í•©ë‹ˆë‹¤.";
                break;
            case 'close_friend':
                actChange = r(5, 15);
                toxChange = r(-5, 5);
                friChange = r(15, 25);
                logMsg = "ë‹‰ë„¤ì„ ì–¸ê¸‰ì„ í—ˆìš©í–ˆìŠµë‹ˆë‹¤. ìê¸°ë“¤ë¼ë¦¬ ì•„ëŠ” ì–˜ê¸°ë¥¼ í•˜ê¸° ì‹œì‘í•©ë‹ˆë‹¤.";
                break;
            case 'ignore':
                actChange = r(-10, 10);
                toxChange = r(-5, 15);
                friChange = r(0, 5);
                logMsg = "ì•„ë¬´ê²ƒë„ ì•ˆí•˜ê³  ë°©ì¹˜í–ˆìŠµë‹ˆë‹¤. ìì—° ìƒíƒœë¡œ í˜ëŸ¬ê°‘ë‹ˆë‹¤.";
                break;
        }

        // Apply changes
        applyStats(actChange, toxChange, friChange);
        addLog(logMsg);

        // Random Event
        triggerRandomEvent();

        // Check Endings
        checkGameStatus();
        
        if (!state.isGameOver) {
            state.day++;
            updateUI();
        }
    }

    function r(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function applyStats(a, t, f) {
        state.activity = clamp(state.activity + a);
        state.toxicity = clamp(state.toxicity + t);
        state.friendship = clamp(state.friendship + f);
    }

    function clamp(val) {
        return Math.max(0, Math.min(100, val));
    }

    function triggerRandomEvent() {
        if (Math.random() > 0.3) return; // 30% chance

        const eventRoll = Math.random();
        if (eventRoll < 0.2) {
            addLog("ğŸ“¢ ì‹¤ì‹œê°„ ë² ìŠ¤íŠ¸ ê°¤ëŸ¬ë¦¬ì— ë“±ì¬ë˜ì—ˆìŠµë‹ˆë‹¤! (ìœ ì… í­ì£¼)", "bad");
            applyStats(30, 20, -5);
        } else if (eventRoll < 0.4) {
            addLog("ğŸ‘®â€â™‚ï¸ ì•Œë°”(ìš´ì˜ì)ê°€ ê°œë…ê¸€ì„ ì‚­ì œí–ˆìŠµë‹ˆë‹¤. (ë¯¼ì‹¬ í‰í‰)", "bad");
            applyStats(-10, 10, 0);
        } else if (eventRoll < 0.6) {
            addLog("ğŸ¨ ê¸ˆì†ì´ ì§¤ì„ ê·¸ë ¤ì™”ìŠµë‹ˆë‹¤. (ë¶„ìœ„ê¸° ì •í™”)", "good");
            applyStats(10, -10, 5);
        } else if (eventRoll < 0.8) {
            addLog("ğŸ©¸ ì˜† ê°¤ëŸ¬ë¦¬ì—ì„œ ì¹¨ê³µì„ ì™”ìŠµë‹ˆë‹¤!", "bad");
            applyStats(20, 30, 0);
        } else {
             addLog("ğŸ’¤ ìƒˆë²½ì´ë¼ ê¸€ ë¦¬ì  ì´ ë©ˆì·„ìŠµë‹ˆë‹¤.", "normal");
             applyStats(-15, -5, 0);
        }
    }

    function checkGameStatus() {
        // Ending Conditions
        
        // 1. ì •ì „ê°¤ ì—”ë”© (í™œë™ 0)
        if (state.activity <= 0) {
            gameOver("â„ï¸ ì •ì „ê°¤ ì—”ë”©", "ì•„ë¬´ë„ ê¸€ì„ ì“°ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>ê²°êµ­ ê°¤ëŸ¬ë¦¬ ìŠ¹ê²©ì— ì‹¤íŒ¨í•˜ê³  ë§ˆì´ë„ˆ ê°¤ëŸ¬ë¦¬ê°€ íì‡„ë©ë‹ˆë‹¤.");
            return;
        }

        // 2. ê°¤ê¸°ì¥ ì—”ë”© (ì–´ê·¸ë¡œ 100)
        if (state.toxicity >= 100) {
            gameOver("ğŸ’£ ê°¤ê¸°ì¥/í­íŒŒ ì—”ë”©", "ì˜¨ê°– í˜ì˜¤ ê²Œì‹œë¬¼ê³¼ ë„ë°°ë¡œ ê°€ë“ ì°¼ìŠµë‹ˆë‹¤.<br>ìš´ì˜ ì›ì¹™ ìœ„ë°˜ìœ¼ë¡œ ì ‘ê·¼ ì œí•œ ì¡°ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return;
        }

        // 3. ì‹ë¬¼ê°¤ ì—”ë”© (ì–´ê·¸ë¡œ 0, í™œë™ ë‚®ìŒ)
        if (state.toxicity <= 0 && state.activity < 50) {
            gameOver("ğŸŒ¿ ì‹ë¬¼ê°¤ ì—”ë”©", "ë„ˆë¬´ ì—„ê²©í•œ ê·œì • ë•Œë¬¸ì— ë…¸ì¼ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.<br>ì‚¬ëŒë“¤ì´ ë” ì¬ë¯¸ìˆëŠ” ê³³ìœ¼ë¡œ ë– ë‚¬ìŠµë‹ˆë‹¤.");
            return;
        }

        // 4. ì¢†ëª©ê°¤ ì—”ë”© (ì¹œëª© 100)
        if (state.friendship >= 100) {
            gameOver("ğŸ¤® ì¢†ëª©/ë„¤ì„ë“œí™” ì—”ë”©", "ê·¸ë“¤ë§Œì˜ ë¦¬ê·¸ê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.<br>ë‰´ë¹„ ë°°ì²™ì´ ì‹¬í•´ì ¸ ê°¤ëŸ¬ë¦¬ê°€ ê³ ë¦½ë˜ì–´ ì©ì—ˆìŠµë‹ˆë‹¤.");
            return;
        }

        // 5. ì‹¤ë¶ê°¤ ì ë ¹ ì—”ë”© (í™œë™ 100, ì–´ê·¸ë¡œ ë†’ìŒ)
        if (state.activity >= 100 && state.toxicity > 70) {
            gameOver("ğŸ§Ÿâ€â™‚ï¸ ì‹¤ë¶ê°¤ ì ë ¹ ì—”ë”©", "ë„ˆë¬´ ìœ ëª…í•´ì ¸ì„œ í†µì œê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.<br>ì›ì£¼ë¯¼ë“¤ì€ ë‹¤ ë– ë‚˜ê³  ì•¼ê°¤ ì‹ë¯¼ì§€ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return;
        }

        // Victory Condition
        if (state.day > maxDays) {
            gameWin();
        }
    }

    function gameOver(title, desc) {
        state.isGameOver = true;
        endingTitle.innerText = title;
        endingTitle.style.color = "#d63031";
        endingDesc.innerHTML = desc;
        overlay.style.display = 'flex';
    }

    function gameWin() {
        state.isGameOver = true;
        endingTitle.innerText = "ğŸ† ì „ì„¤ì˜ ì£¼ë”± ë“±ê·¹";
        endingTitle.style.color = "#ffeaa7";
        endingDesc.innerHTML = `ì¶•í•˜í•©ë‹ˆë‹¤!<br>30ì¼ ë™ì•ˆ ì˜¨ê°– ë˜¥ì„ í”¼í•˜ë©° ê°¤ëŸ¬ë¦¬ë¥¼ ì§€ì¼œëƒˆìŠµë‹ˆë‹¤.<br><br>ìµœì¢… ìŠ¤íƒ¯:<br>í™œì„±ë„: ${state.activity} | ì–´ê·¸ë¡œ: ${state.toxicity} | ì¹œëª©: ${state.friendship}`;
        overlay.style.display = 'flex';
        document.getElementById('restart-btn').innerText = "ë‹¤ì‹œ ê³ í†µë°›ê¸°";
    }

    function resetGame() {
        state = {
            day: 1,
            activity: 50,
            toxicity: 20,
            friendship: 10,
            isGameOver: false
        };
        logEl.innerHTML = '<div class="log-entry">> ìƒˆë¡œìš´ ê°¤ëŸ¬ë¦¬ê°€ ê°œì„¤ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë²ˆì—” ì˜ í•´ë´…ì‹œë‹¤.</div>';
        overlay.style.display = 'none';
        updateUI();
    }

    // Init
    updateUI();

</script>
</body>
</html>
